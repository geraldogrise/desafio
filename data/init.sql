USE [banco];  

CREATE TABLE TBL_USER (
    USER_ID uniqueidentifier NOT NULL DEFAULT NEWID(),
    TXT_USERNAME VARCHAR(50) NOT NULL,
    TXT_PASSWORD VARCHAR(100) NOT NULL,
    TXT_EMAIL VARCHAR(100) NOT NULL,
    TXT_PHONE VARCHAR(20) NULL,
    TXT_STATUS VARCHAR(20) NULL,
    TXT_ROLE VARCHAR(20) NULL,
    CREATED_AT DATETIME NOT NULL DEFAULT GETDATE(),
    UPDATED_AT DATETIME NULL,
    CONSTRAINT PK_TBL_USER PRIMARY KEY (USER_ID)
);

CREATE TABLE TBL_LANCAMENTO(
    LAN_ID UNIQUEIDENTIFIER  DEFAULT NEWID(),
    DT_LANCAMENTO DATETIME NOT NULL DEFAULT GETDATE(),
    TP_LANCAMENTO VARCHAR(10) CHECK (TP_LANCAMENTO IN ('DEBITO', 'CREDITO')) NOT NULL,
    VLR_LANCAMENTO DECIMAL(18,2) NOT NULL CHECK (VLR_LANCAMENTO > 0),
    DES_LANCAMENTO NVARCHAR(255),
    CAT_LANCAMENTO NVARCHAR(100),
    CREATED_AT DATETIME DEFAULT GETDATE(),
    UPDATED_AT DATETIME NULL,
    CONSTRAINT PK_TBL_LANCAMENTO PRIMARY KEY (LAN_ID)
);

CREATE TABLE TBL_CONSOLIDADO (
    CON_ID UNIQUEIDENTIFIER  DEFAULT NEWID(),
    DT_CONSOLIDADO DATE NOT NULL UNIQUE,
    VLR_DEB DECIMAL(18,2) NOT NULL DEFAULT 0,
    VLR_CRE DECIMAL(18,2) NOT NULL DEFAULT 0,
    VLR_SLD_FINAL DECIMAL(18,2) NOT NULL DEFAULT 0,
    CREATED_AT DATETIME DEFAULT GETDATE(),
    UPDATED_AT DATETIME NULL,
    CONSTRAINT PK_TBL_CONSOLIDADO PRIMARY KEY (CON_ID)
);

-- Inserir um usu√°rio na tabela TBL_USER
INSERT INTO [dbo].[TBL_USER]
           ([USER_ID]
           ,[TXT_USERNAME]
           ,[TXT_PASSWORD]
           ,[TXT_EMAIL]
           ,[TXT_PHONE]
           ,[TXT_STATUS]
           ,[TXT_ROLE]
           ,[CREATED_AT]
           ,[UPDATED_AT])
     VALUES
           (
           NEWID(),                  
           'geraldo.grise',           
           '$2a$11$4WL3VR7GfjAeS8R9dKsGDuxuLdO12QM1BByeHe/Rz7SB3wUUI.4HK',              
           'geraldogrise@hotmail.com',
           '71993776041',            
           'Active',                  
           'Customer',                
           GETDATE(),                
           GETDATE()                  
           );
